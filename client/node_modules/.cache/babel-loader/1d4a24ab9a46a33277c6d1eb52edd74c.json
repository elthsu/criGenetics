{"ast":null,"code":"import React, { useEffect, useState, useContext } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { Context } from './Context';\n\nfunction One(props) {\n  const {\n    state,\n    reload\n  } = useContext(Context);\n  useEffect(() => {\n    let userId = localStorage.getItem(\"cri_genetics_userId\");\n\n    if (!userId) {\n      userId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n      localStorage.setItem(\"cri_genetics_userId\", userId);\n      localStorage.setItem(\"cri_genetics_landing\", window.location.href);\n    }\n\n    let sessionId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    sessionStorage.setItem(\"cri_genetics_sessionId\", sessionId);\n    axios.post('/click', {\n      url: window.location.href,\n      userId,\n      sessionId\n    }).then(res => {\n      localStorage.setItem(\"cri_genetics_campaign\", res.data);\n      reload();\n      window.location.replace(res.data);\n    });\n  }, []);\n  return null;\n}\n\nexport default One;","map":{"version":3,"sources":["/Users/eltonhsu/cri/challenge/client/src/One.js"],"names":["React","useEffect","useState","useContext","axios","Context","One","props","state","reload","userId","localStorage","getItem","Math","random","toString","substring","setItem","window","location","href","sessionId","sessionStorage","post","url","then","res","data","replace"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,UAApC,QAAqD,OAArD;AACA,OAAO,WAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,WAAxB;;AAEA,SAASC,GAAT,CAAcC,KAAd,EAAqB;AACnB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBN,UAAU,CAACE,OAAD,CAApC;AAEAJ,EAAAA,SAAS,CAAC,MAAI;AACZ,QAAIS,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAAb;;AACA,QAAG,CAACF,MAAJ,EAAW;AACTA,MAAAA,MAAM,GAAGG,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,IAA8CH,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,CAAvD;AACAL,MAAAA,YAAY,CAACM,OAAb,CAAqB,qBAArB,EAA4CP,MAA5C;AACAC,MAAAA,YAAY,CAACM,OAAb,CAAqB,sBAArB,EAA6CC,MAAM,CAACC,QAAP,CAAgBC,IAA7D;AACD;;AACD,QAAIC,SAAS,GAAGR,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,IAA8CH,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,CAA9D;AACAM,IAAAA,cAAc,CAACL,OAAf,CAAuB,wBAAvB,EAAiDI,SAAjD;AAEAjB,IAAAA,KAAK,CAACmB,IAAN,CAAW,QAAX,EAAqB;AAACC,MAAAA,GAAG,EAAEN,MAAM,CAACC,QAAP,CAAgBC,IAAtB;AAA4BV,MAAAA,MAA5B;AAAoCW,MAAAA;AAApC,KAArB,EAAqEI,IAArE,CAA0EC,GAAG,IAAE;AAC7Ef,MAAAA,YAAY,CAACM,OAAb,CAAqB,uBAArB,EAA8CS,GAAG,CAACC,IAAlD;AACAlB,MAAAA,MAAM;AACNS,MAAAA,MAAM,CAACC,QAAP,CAAgBS,OAAhB,CAAwBF,GAAG,CAACC,IAA5B;AACD,KAJD;AAKD,GAfQ,EAeN,EAfM,CAAT;AAiBA,SAAO,IAAP;AACD;;AAED,eAAerB,GAAf","sourcesContent":["import React, {useEffect, useState, useContext} from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { Context } from './Context'\n\nfunction One (props) {\n  const { state, reload } = useContext(Context)\n\n  useEffect(()=>{\n    let userId = localStorage.getItem(\"cri_genetics_userId\")\n    if(!userId){\n      userId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n      localStorage.setItem(\"cri_genetics_userId\", userId)\n      localStorage.setItem(\"cri_genetics_landing\", window.location.href)\n    }\n    let sessionId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    sessionStorage.setItem(\"cri_genetics_sessionId\", sessionId)\n\n    axios.post('/click', {url: window.location.href, userId, sessionId}).then(res=>{\n      localStorage.setItem(\"cri_genetics_campaign\", res.data)\n      reload()\n      window.location.replace(res.data)\n    })\n  }, [])\n\n  return null\n}\n\nexport default One;\n"]},"metadata":{},"sourceType":"module"}